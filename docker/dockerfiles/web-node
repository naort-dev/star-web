ARG REGISTRY=''
ARG IMAGE_TAG=''
FROM ${REGISTRY}base-node${IMAGE_TAG}

COPY . /starsona/web
RUN chmod +x /starsona/web/docker-entrypoint.sh

WORKDIR /starsona/web
RUN npm install --no-color
RUN npm run build --no-color

ENV PORT=8080
EXPOSE $PORT

ENTRYPOINT ["./docker-entrypoint.sh"]
CMD ["node", "node_modules/.bin/webpack-dev-server", "--env.env=prod", "--hot", "--no-color"]

